
var this$0=this,$=window.$,NProgress=window.NProgress,debounce=window.debounce,fetch=window.fetch,getL=window.getL,getSize=window.getSize,loadImage=window.loadImage;function detectIEEdge(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}if(getSize=function(){var e,t,o,n,i,r="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",a="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;for(t=(o=0===(e=function(e){if(e){if(Array.isArray(e))return 0;var t;if(a&&a(e),"object"==typeof e&&"function"==typeof(t=e[r]))return a&&a(void 0),t.call(e);if(a&&a(void 0),e+""=="[object Generator]")return e}throw new Error(e+" is not iterable")}(n=$("size-indicators").find("size-indicator"))))?n.length:void 0;o?e<t:!(t=e.next()).done;)if(i=o?n[e++]:t.value,"flex"===getComputedStyle(i).display)return i.classList[0].split("-")[1].replace("flex","xs");e=t=o=n=void 0},loadImage=function(e){return new Promise((function(t){var o=new Image;o.onload=function(){return t(o)},o.src=e}))},detectIEEdge()){var LLegacy=((navigator.language||navigator.userLanguage).indexOf("-")?(navigator.language||navigator.userLanguage).split("-")[0]:navigator.language||navigator.userLanguage).toLowerCase()||"en",host=void 0;host=-1===location.host.indexOf("glitch.me")?location.protocol+"//"+LLegacy+"."+location.hostname:location.protocol+"//"+location.hostname,location.replace(host+"/outdated-browser.html")}debounce=function(e,t,o){var n;return function(){var i=this$0,r=i.arguments,a=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(i,r)}),t),a&&e.apply(i,r)}},getL=function(){var e=navigator.language||navigator.userLanguage;return e.includes("-")&&(e=e.split("-")[0]),e.toLowerCase()||"en"},NProgress.configure({showSpinner:!1});var ofetch=window.fetch;fetch=function(e,t){return(void 0===t||t.silent||$("#nprogress")[0])&&NProgress.start(),ofetch(e,t).then((function(e){return(void 0===t||t.silent||$("#nprogress")[0])&&NProgress.done(),e}))};$=window.$;var autocomplete=window.autocomplete,alert=window.alert,done=(debounce=window.debounce,window.done),HOST=(fetch=window.fetch,getL=window.getL,getSize=window.getSize,window.HOST),REGION=window.REGION,load=window.load,moment=window.moment,T=window.T,playVid=window.playVid,openPlayer=window.openPlayer,closePlayer=window.closePlayer;playVid=function(e){openPlayer()},closePlayer=function(){$("#player").remove(),$("#filters")[0].style.setProperty("display",""),$("#results")[0].style.setProperty("display","")},openPlayer=function(){$("#view-inner").append(T.PLAYER),$("#filters")[0].style.setProperty("display","none","important"),$("#results")[0].style.setProperty("display","none","important")};this$0=this,$=window.$,autocomplete=window.autocomplete,alert=window.alert,debounce=window.debounce,done=window.done,fetch=window.fetch,getL=window.getL,getSize=window.getSize,HOST=window.HOST,REGION=window.REGION,load=window.load,moment=window.moment,T=window.T;var setupSearch=window.setupSearch,SEARCH=window.SEARCH;setupSearch=function(){SEARCH=function(e){$("#view-inner").html(T.RESULTS);$("param").html('<i class="fas fa-sync fa-spin"></i>'),fetch(HOST+"/api/"+REGION+"/search/"+e).then((function(e){return e.text()})).then((function(t){var o,n,i,r="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",a="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;function l(e){if(e){if(Array.isArray(e))return 0;var t;if(a&&a(e),"object"==typeof e&&"function"==typeof(t=e[r]))return a&&a(void 0),t.call(e);if(a&&a(void 0),e+""=="[object Generator]")return e}throw new Error(e+" is not iterable")}var s=JSON.parse(t);for(n=(i=0===(o=l(s)))?s.length:void 0;i?o<n:!(n=o.next()).done;){var c,d,u,w;(function(t){var o,n="";for(w=t.videoThumbnails,c=l(w),d=(u=0===c)?w.length:void 0;u?c<d:!(d=c.next()).done;)n+=(o=u?w[c++]:d.value).url+"\t"+o.width+"w,\n";c=d=u=w=void 0;var i,r=T.RESULT.replace("{{title}}",t.title).replace("{{preview-set}}",n.slice(0,-1)).replace("{{preview-desc}}",t.description).replace("{{duration}}",moment.duration(1e3*t.lengthSeconds).humanize()).replace("{{duration-detailed}}",(i=moment.utc(moment.duration(t.lengthSeconds,"seconds").asMilliseconds()).format("HH:mm:ss"),i.startsWith("00:")&&(i=i.slice(3)),i.startsWith("0")&&(i=i.slice(1)),i)).replace("{{video}}",t.videoId).replace("{{author}}",t.author).replace("{{authorid}}",t.authorId).replace("{{views}}",t.viewCount);$("#results").attr("q",e),$("#results").attr("page",$("#results").attr("page")?$("#result").attr("page")+1:1),$("#results-inner").append(r)})(i?s[o++]:n.value)}if(o=n=i=void 0,0===$("#results").height()){console.warn("your browser doesn't like flexboxes too much :(");var h=setInterval((function(){0!==$("#view-inner").height()&&(console.log("fixed the results flexbox..."),$("#results")[0].style.position="absolute",$("#results")[0].style.width="100%",$("#results")[0].style.setProperty("margin-top",$("#filters")[0].clientHeight+"px","important"),$("#results")[0].style.height="calc(100% - "+($("#filters")[0].clientHeight+$("#top")[0].clientHeight+$("#footer")[0].clientHeight)+"px)",clearInterval(h))}),0);$("#results").on("scroll",(function(){var e=this$0;console.log(1),e.scrollTop,e.clientHeight,e.scrollHeigh}))}}))};var e=document.getElementById("search-input");getL(),autocomplete({input:e,showOnFocus:!0,minLength:1,className:"live-search backdrop-blur",debounceWaitMs:399,fetch:function(e,t){var o=e.toLowerCase();o&&fetch(HOST+"/api/"+REGION+"/complete/"+o).then((function(e){return e.text()})).then((function(o){var n=JSON.parse(o);if(200===n.code){var i=[e.toLowerCase!==n.data[0]?{label:e,value:e.toLowerCase()}:""];n.data.filter((function(e){return e.length})).forEach((function(e){i.push({label:e,value:e})})),t(i)}else 404===n.code&&t([{label:"❌No results",value:"❌No results"}])}))},onSelect:function(t){"❌No results"!==t.label&&(e.value=t.label,SEARCH(t.label))}});$("#search-input").on("focus",(function(){"xs"===getSize()&&($("#search")[0].style.setProperty("margin-left",0,"important"),$("#dynamic-logo")[0].style.setProperty("display","none","important"),$("#search").addClass("col-11"),$("#search-btn").addClass("d-none"),$("#search-input").addClass("rounded"))})),$("#search-input").on("blur",(function(){"xs"===getSize()&&($("#search")[0].style.setProperty("margin-left",""),$("#dynamic-logo")[0].style.setProperty("display",""),$("#search").removeClass("col-11"),$("#search-btn").removeClass("d-none"),$("#search-input").removeClass("rounded"))}))};var Trianglify=window.Trianglify;debounce=window.debounce,fetch=window.fetch;window.load=function(){return setTimeout((function(){document.querySelector("diamond").setAttribute("style",""),document.querySelector("#wrap")&&document.querySelector("#wrap").setAttribute("style","display:none;")}),999)},window.done=function(){return setTimeout((function(){document.querySelector("diamond").setAttribute("style","display:none;"),document.querySelector("#wrap")&&document.querySelector("#wrap").setAttribute("style","")}),999)};var initBg=function(){var e=Math.floor(150*Math.random()+60),t=(Math.floor(11*Math.random()+4),getComputedStyle(document.documentElement).getPropertyValue("--color-accent-main"),new Trianglify({x_gradient:["#173b5e","#3e87d0","#1c4873","#215487","#26619c","#2b6eb1","#307bc5"],noiseIntensity:0,cellsize:e}).generate(window.innerWidth,window.innerHeight));document.body.setAttribute("style","background-image: "+t.dataUrl)};window.onresize=debounce(initBg,999),location.hash="",console.log("%c Welcome to lapisTube 🙃","background: blue;");$=window.$,autocomplete=window.autocomplete,alert=window.alert,debounce=window.debounce,done=window.done,fetch=window.fetch,getL=window.getL,load=window.load,moment=window.moment,SEARCH=window.SEARCH,setupSearch=window.setupSearch,T=window.T;var API=window.API,GEO=window.GEO,lscache=(HOST=window.HOST,REGION=window.REGION,window.lscache);"gtranslate.io"!==!location.host&&!location.host.endsWith("glitch.me")&&window.self===window.top&&3===location.hostname.split(".").length&&(location.hostname.split(".")[0],getL()[location.replace(location.protocol+"//"+location.hostname.split(".").splice(1).join("."))]),HOST=location.protocol+"//"+(location.host.endsWith("glitch.me")?location.hostname:"gtranslate.io"===location.hostname?location.href.split("/edit/")[1]:getL()+"."+location.hostname),API="//"+location.hostname+"/api",$(document).on("click","#toggle-left",(function(){var e=$("#left");e.attr("expanded","false"===e.attr("expanded")?"true":"false"),setTimeout((function(){"false"===e.attr("expanded")?e.addClass("d-none"):e.removeClass("d-none")}),199)}));var tr=HOST+"/html";if(lscache.get("cookie-accepted")){var T$0=window.T={};Promise.all([tr+"/app.html",API+"/geoip",tr+"/channel.html",tr+"/player.html",tr+"/result-item.html",tr+"/result-list.html"].map((function(e){return fetch(e).then((function(e){return e.text()}))}))).then((function(e){T$0.HOME=e[0],GEO=JSON.parse(e[1]),REGION=GEO.country_code.toLowerCase(),console.debug("Your Geo Information by Maxmind: ",GEO),console.debug("Your browser language: ",getL()),T$0.CHANNEL=e[2],T$0.PLAYER=e[3],T$0.RESULT=e[4],T$0.RESULTS=e[5],setupClient(),done(),demo()})).catch((function(e){console.warn(e),alert("WEBSITE FAILED LOADING. PRESS OK TO TRY AGAIN!"),setTimeout((function(){location.reload(!0)}))}))}else fetch(tr+"/cookie.html").then((function(e){return e.text()})).then((function(e){$("gtranslate")[0].outerHTML=e,done()}));var demo=function(){var e="New americana";$("#top")[0].value=e,SEARCH(e)};window.onhashchange=function(){var e=HOST+"/html";switch(location.hash){case"#cookie-what?":case"#what?":fetch(e+"/what.html").then((function(e){return e.text()})).then((function(e){$("[pop]")[0].outerHTML=e,done()}))}switch(location.hash){case"#cookie":fetch(e+"/cookie.html").then((function(e){return e.text()})).then((function(e){$("[pop]")[0].outerHTML=e,done()}))}},$(document).on("click","#usage-accept",(function(){lscache.set("cookie-accepted",!0,44640),location.reload(!0)}));var setupClient=function(){$("gtranslate")[0].outerHTML=T.HOME,moment.locale(getL()),setupSearch(),$("#yt-lang").text(getL()),$("#dynamic-logo .alpha-target")[0].src="https://raw.githubusercontent.com/legacy-icons/famfamfam-flags/master/dist/png/"+GEO.country_code.toLowerCase()+".png",$("#dynamic-logo")[0].setAttribute("title","Region: "+GEO.country),$("#yt-lang")[0].setAttribute("title","App language: "+getL())};