/*💜/* i love you, monad*/
var $=window.$,autocomplete=window.autocomplete,alert=window.alert,debounce=window.debounce,done=window.done,fetch=window.fetch,getL=window.getL,HOST=window.HOST,REGION=window.REGION,load=window.load,T=window.T,SEARCH=function(m){$("view").html(T.RESULTS),$("param").html('<i class="fas fa-sync fa-spin"></i>'),fetch(HOST+"/api/"+REGION+"/search/"+m).then(function(e){return e.text()}).then(function(e){var t,o,n,a,i,r,c,l="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",s="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;function u(e){if(e){if(Array.isArray(e))return 0;var t;if(s&&s(e),"object"==typeof e&&"function"==typeof(t=e[l]))return s&&s(void 0),t.call(e);if(s&&s(void 0),e+""=="[object Generator]")return e}throw new Error(e+" is not iterable")}var d,w=JSON.parse(e);for(o=(n=0===(t=u(w)))?w.length:void 0;n?t<o:!(o=t.next()).done;){d=n?w[t++]:o.value;var g,h=T.RESULT.replace("{{title}}",d.title),f="";for(i=(r=0===(a=u(c=d.videoThumbnails)))?c.length:void 0;r?a<i:!(i=a.next()).done;)f+=(g=r?c[a++]:i.value).url+"\t"+g.width+"w,\n";a=i=r=c=void 0,h=h.replace("{{preview}}",'<img data="preview" alt="preview" srcset="'+f.slice(0,-1)+'" />'),console.log(h),$("#results").attr("q",m),$("#result").attr("page",$("#result").attr("page")?$("#result").attr("page")+1:1),$("#results-inner").append(h)}t=o=n=void 0})};$("#results").on("scroll",function(){var e=$("#results")[0];e.scrollTop,e.clientHeight,e.scrollHeigh});var this$0=this,NProgress=($=window.$,window.NProgress),loadImage=(debounce=window.debounce,fetch=window.fetch,getL=window.getL,window.loadImage);function detectIEEdge(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var n=e.indexOf("Edge/");return 0<n&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}if(loadImage=function(o){return new Promise(function(e){var t=new Image;t.onload=function(){return e(t)},t.src=o})},detectIEEdge()){var LLegacy=((navigator.language||navigator.userLanguage).indexOf("-")?(navigator.language||navigator.userLanguage).split("-")[0]:navigator.language||navigator.userLanguage).toLowerCase()||"en",host=void 0;host=-1===location.host.indexOf("glitch.me")?location.protocol+"//"+LLegacy+"."+location.hostname:location.protocol+"//"+location.hostname,location.replace(host+"/outdated-browser.html")}debounce=function(n,a,i){var r;return function(){var e=this$0,t=e.arguments,o=i&&!r;clearTimeout(r),r=setTimeout(function(){r=null,i||n.apply(e,t)},a),o&&n.apply(e,t)}},getL=function(){var e=navigator.language||navigator.userLanguage;return e.includes("-")&&(e=e.split("-")[0]),e.toLowerCase()||"en"},NProgress.configure({showSpinner:!1});var ofetch=window.fetch;fetch=function(e,t){return(void 0===t||t.silent||$("#nprogress")[0])&&NProgress.start(),ofetch(e,t).then(function(e){return(void 0===t||t.silent||$("#nprogress")[0])&&NProgress.done(),e})};var Trianglify=window.Trianglify;debounce=window.debounce,fetch=window.fetch;window.load=function(){return setTimeout(function(){document.querySelector("diamond").setAttribute("style",""),document.querySelector("#wrap")&&document.querySelector("#wrap").setAttribute("style","display:none;")},999)},window.done=function(){return setTimeout(function(){document.querySelector("diamond").setAttribute("style","display:none;"),document.querySelector("#wrap")&&document.querySelector("#wrap").setAttribute("style","")},999)};var initBg=function(){var e=Math.floor(150*Math.random()+60),t=(Math.floor(11*Math.random()+4),getComputedStyle(document.documentElement).getPropertyValue("--color-accent-main"),new Trianglify({x_gradient:["#173b5e","#3e87d0","#1c4873","#215487","#26619c","#2b6eb1","#307bc5"],noiseIntensity:0,cellsize:e}).generate(window.innerWidth,window.innerHeight));document.body.setAttribute("style","background-image: "+t.dataUrl)};window.onresize=debounce(initBg,999),location.hash="",console.log("%c Welcome to lapisTube 🙃","background: blue;");$=window.$,autocomplete=window.autocomplete,alert=window.alert,debounce=window.debounce,done=window.done,fetch=window.fetch,getL=window.getL,load=window.load,SEARCH=window.SEARCH,T=window.T;var API=window.API,GEO=window.GEO,lscache=(HOST=window.HOST,REGION=window.REGION,window.lscache);"gtranslate.io"===!location.host||location.host.endsWith("glitch.me")||window.self!==window.top||3!==location.hostname.split(".").length||(location.hostname.split(".")[0],getL()[location.replace(location.protocol+"//"+location.hostname.split(".").splice(1).join("."))]),HOST=location.protocol+"//"+(location.host.endsWith("glitch.me")?location.hostname:"gtranslate.io"===location.hostname?location.href.split("/edit/")[1]:getL()+"."+location.hostname),API="//"+location.hostname+"/api",$(document).on("click","#toggle-left",function(){var e=$("#left");e.attr("expanded","false"===e.attr("expanded")?"true":"false"),setTimeout(function(){"false"===e.attr("expanded")?e.addClass("d-none"):e.removeClass("d-none")},199)});var tr=HOST+"/html";if(lscache.get("cookie-accepted")){var T$0=window.T={};Promise.all([tr+"/app.html",API+"/geoip",tr+"/channel.html",tr+"/player.html",tr+"/result-item.html",tr+"/result-list.html"].map(function(e){return fetch(e).then(function(e){return e.text()})})).then(function(e){T$0.HOME=e[0],GEO=JSON.parse(e[1]),REGION=GEO.country_code.toLowerCase(),console.debug("Your Geo Information by Maxmind: ",GEO),console.debug("Your browser language: ",getL()),T$0.CHANNEL=e[2],T$0.PLAYER=e[3],T$0.RESULT=e[4],T$0.RESULTS=e[5],setup(),done(),demo()}).catch(function(e){console.warn(e),alert("WEBSITE FAILED LOADING. PRESS OK TO TRY AGAIN!"),setTimeout(function(){location.reload(!0)})})}else fetch(tr+"/cookie.html").then(function(e){return e.text()}).then(function(e){$("gtranslate")[0].outerHTML=e,done()});var demo=function(){var e="Günther";$("#top")[0].value=e,SEARCH(e)};window.onhashchange=function(){var e=HOST+"/html";switch(location.hash){case"#cookie-what?":case"#what?":fetch(e+"/what.html").then(function(e){return e.text()}).then(function(e){$("[pop]")[0].outerHTML=e,done()})}switch(location.hash){case"#cookie":fetch(e+"/cookie.html").then(function(e){return e.text()}).then(function(e){$("[pop]")[0].outerHTML=e,done()})}},$(document).on("click","#usage-accept",function(){lscache.set("cookie-accepted",!0,44640),location.reload(!0)});var setup=function(){$("gtranslate")[0].outerHTML=T.HOME,$("#yt-lang").text(getL()),$("#logo .alpha-target")[0].src="https://raw.githubusercontent.com/legacy-icons/famfamfam-flags/master/dist/png/"+GEO.country_code.toLowerCase()+".png",$(".dynamic-logo")[0].setAttribute("title","Region: "+GEO.country),$("#yt-lang")[0].setAttribute("title","App language: "+getL());var t=document.getElementById("search"),i="❌No results";getL(),autocomplete({input:t,showOnFocus:!0,minLength:1,className:"live-search backdrop-blur",debounceWaitMs:500,fetch:function(n,a){var e=n.toLowerCase();e&&fetch(HOST+"/api/"+REGION+"/complete/"+e).then(function(e){return e.text()}).then(function(e){var t=JSON.parse(e);if(200===t.code){var o=[n.toLowerCase!==t.data[0]?{label:n,value:n.toLowerCase()}:""];t.data.filter(function(e){return e.length}).forEach(function(e){o.push({label:e,value:e})}),a(o)}else 404===t.code&&a([{label:i,value:i}])})},onSelect:function(e){e.label!==i&&(t.value=e.label,SEARCH(e.label))}})};